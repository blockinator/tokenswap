(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,n){e.exports=n(10)},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(1),s=(n(6),n(7),n(8),{tokenContractAddress:"0x05c5E1286879B91d1Fd5098Bf16587388a3faC24",abi:[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"burn","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"target","type":"address"},{"name":"mintedAmount","type":"uint256"}],"name":"mintToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_value","type":"uint256"}],"name":"burnFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"},{"name":"_extradata","type":"bytes"}],"name":"approveAndCall","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Burn","type":"event"}],swapAddress:"0x0b5F844106077E481090C5715341afb2927aE698",tronPlatAddress:"TQRhhVJuXdywSMDJQM842uKNAz1c5DGqS2",tronConfirmTime:5e4,ethBlockTime:15e3,ethConfirmTime:165e3});function c(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise(function(t,r){e.apply(void 0,n.concat([function(e,n){e?r(e):t(n)}]))})}}var i=function(e){return new Promise(function(t){setTimeout(t,e)})},o=n(2),p=n(3),l=function(){function e(){Object(o.a)(this,e),this._account=null,this.changeHandler=null}return Object(p.a)(e,[{key:"setHandler",value:function(e){this.changeHandler=e}},{key:"setAccount",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t)throw this.changeHandler&&this.changeHandler(t,null),t;var r=this._account;(r!==e||n)&&(this._account=e,this.changeHandler&&this.changeHandler(null,e,r))}},{key:"account",get:function(){return this._account}}]),e}(),d=null,f=null;function h(){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(a.a.mark(function e(){var t,n,r,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:10,n=u.length>1&&void 0!==u[1]?u[1]:100,(r=window.web3)&&r.eth){e.next=9;break}if(t){e.next=6;break}throw new Error("Please install MetaMask.");case 6:return e.next=8,i(n);case 8:return e.abrupt("return",h(--t,n+10));case 9:return f=(d=r).BigNumber,e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var y=new l;function m(){return y.account}function v(){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(a.a.mark(function e(){var t,n,r,u,s,c,i,o,p=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]&&p[0],n=p.length>1&&void 0!==p[1]&&p[1],e.next=4,h().catch(function(e){throw y.setAccount(null,e),e});case 4:if(r=e.sent,!(s=(u=function(){return r.eth.accounts[0]})())){e.next=10;break}return y.setAccount(s,null,n),e.abrupt("return",s);case 10:if(!(c=window.ethereum)||!t){e.next=20;break}return e.prev=12,e.next=15,c.enable();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),y.setAccount(null,new Error("Action has been declined by user."),n);case 20:return(i=u())||(o="Please log in to your Metamask.",t||(o="click to connect your Metamask to begin the migration!"),y.setAccount(null,new Error(o),n)),y.setAccount(i,null,n),e.abrupt("return",i);case 24:case"end":return e.stop()}},e,null,[[12,17]])}))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.abrupt("return",t.eth.contract(s.abi).at(s.tokenContractAddress));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(a.a.mark(function e(t){var n,r,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,e.next=5,v();case 5:return r=e.sent,e.next=8,c(n.transfer)(s.swapAddress,t,{from:r});case 8:return u=e.sent,console.debug("transfer result: ",u),e.abrupt("return",u);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,e.next=5,c(n.balanceOf)(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d.version.getNetwork)();case 2:t=e.sent,e.t0=t,e.next="1"===e.t0?6:"2"===e.t0?7:"3"===e.t0?8:"4"===e.t0?9:"42"===e.t0?10:11;break;case 6:return e.abrupt("return","mainnet");case 7:return e.abrupt("return","deprecated test");case 8:return e.abrupt("return","ropsten");case 9:return e.abrupt("return","Rinkeby");case 10:return e.abrupt("return","Kovan");case 11:return e.abrupt("return","unknown");case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e){return e.shift(-12).floor().shift(-6)}n(9);function S(e){var t=e.path,n=e.data,r=e.method,a=void 0===r?"POST":r;return fetch(t,{body:n?JSON.stringify(n):void 0,cache:"no-cache",headers:{"content-type":"application/json"},method:a||"POST"}).then(function(e){return e.json().catch(function(t){return{success:!1,message:t.message||t,data:e.text}})})}function j(e){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S({method:"GET",path:"/api/eth/wallet/".concat(t,"/balance?")}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e,t,n,r){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(a.a.mark(function e(t,n,r,u){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S({path:"/api/swap/withdraw",data:{ethAddress:t,address:n,signature:r,nonce:u}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _=null;function C(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(a.a.mark(function e(){var t,n,r,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:10,n=u.length>1&&void 0!==u[1]?u[1]:100,r=window.tronWeb){e.next=9;break}if(t){e.next=6;break}throw new Error("Please install GuildWallet or TronLink.");case 6:return e.next=8,i(n);case 8:return e.abrupt("return",C(--t,n+10));case 9:return _=r,r.BigNumber,e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var N=new l;function B(e){N.setHandler(e)}function D(){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(a.a.mark(function e(){var t,n,r,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]&&u[0],t=u.length>1&&void 0!==u[1]&&u[1],e.next=4,C().catch(function(e){throw N.setAccount(null,e),e});case 4:if(n=e.sent,!(r=function(){return n.defaultAddress.base58&&n.defaultAddress}())){e.next=10;break}return N.setAccount(r,null,t),e.abrupt("return",r);case 10:N.setAccount(null,new Error("Log in to your TRON wallet and click here to refresh."),t);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(a.a.mark(function e(t){var n,r,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.trx.signMessage.bind(_.trx)||_.trx.sign.bind(_.sign),e.next=3,D();case 3:return r=e.sent,e.next=6,n(r.hex+"FF"+t);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return e.startsWith("0x")&&(e=e.slice(2)),_.address.fromHex("41"+e)}var J=document.querySelector("#eth-panel"),U=J.querySelector(".error"),Y=J.querySelector(".address"),z=J.querySelector(".balance"),K=J.querySelector(".input"),Q=J.querySelector("#send"),Z=J.querySelector(".eth-network-version"),$=function(e){return"string"===typeof e?e:e instanceof Error?e.message:e&&e.toString()||String(e)},V=function(e){var t=$(e);U.innerHTML=t,t&&ee("")},X=J.querySelector(".success.tip");function ee(e){X.innerHTML=e||"",e&&V("")}var te=document.querySelector("#tron-panel"),ne=te.querySelector(".error"),re=te.querySelector(".address"),ae=te.querySelector(".label"),ue=te.querySelector("#swap"),se=te.querySelector(".success.tip"),ce=function(e){var t=$(e);ne.innerHTML=t,t&&ie("")};function ie(e){se.innerHTML=e||"",e&&ce("")}var oe=document.querySelector(".eth-swap-address"),pe=document.querySelector(".tron-plat-address"),le="";oe.innerHTML=s.swapAddress,pe.innerHTML=s.tronPlatAddress,document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("img[data-src]").forEach(function(e){e.src=e.dataset.src})}),window.addEventListener("load",Object(u.a)(a.a.mark(function e(){var t,n,r,c,i,o,p,l,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.value;if(e){if(!l(e))return Q.disabled=!0,V("Invalid number, please input number with maximum 6 decimals."),!1;V("");try{var t=new f(e);if(!t.gte(1))return Q.disabled=!0,V("Minimum withdrawal amount is 1 Blocktorial"),!1;var n=new f(z.innerHTML.replace(/[,-]*/g,"")||0);return t.gt(n)?(Q.disabled=!0,V("Insufficient balance."),!1):(Q.disabled=!1,V(""),!0)}catch(r){return Q.disabled=!0,V(r),!1}}else Q.disabled=!0},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.value;return/^(\d+)(\.\d{0,6})?$/g.test(e)},p=function(){return(p=Object(u.a)(a.a.mark(function e(){var t,n=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],Y.innerHTML){e.next=4;break}return e.next=4,v(!!t).catch(function(){return null});case 4:if(re.innerHTML&&!ne.innerHTML){e.next=7;break}return e.next=7,D(!!t).catch(function(){return null});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)},o=function(){return p.apply(this,arguments)},i=function(){return(i=Object(u.a)(a.a.mark(function e(){var t,n,r,u,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:m()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j(t);case 5:(n=e.sent).success&&(r=n.data,le=r.nonce,u=new f(r.totalPlat),ae.innerHTML="".concat(A(u).toFormat()," Blocktorial"),u.gt(0)?ue.disabled=!1:ue.disabled=!0);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)},c=function(){return i.apply(this,arguments)},r=function(){return(r=Object(u.a)(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1&&void 0!==r[1]?r[1]:m()){e.next=5;break}return z.innerHTML="-",e.abrupt("return");case 5:return e.next=7,M(n).then(function(e){if(e.gt(0)){var n=A(e),r=n.toFormat();t&&!K.value&&(K.value=n.toString()),z.innerHTML=r,d()}else z.innerHTML="0"}).catch(function(e){V(e)});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)},n=function(){return r.apply(this,arguments)},t=function(){var e=m(),t=N.account;return!(!e||!t)&&(t.base58===I(e)||(ce("The current TRON wallet is not imported with the same private key from your MetaMask, please try again."),ue.disabled=!0,!1))},h=function(){var e=Object(u.a)(a.a.mark(function e(r,u,s){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return V(r.message),e.abrupt("return");case 5:V("");case 6:if(u){e.next=9;break}return Y.innerHTML="",e.abrupt("return");case 9:Y.innerHTML=u,H().then(function(e){Z.innerHTML="mainnet"===e?"":"(".concat(e,")")}),n(!0),c(),t();case 14:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),y.setHandler(h),B(function(e,n,r){e?ce(e):(ce(""),n?(re.innerHTML=n.base58,t()):re.innerHTML="")}),J.addEventListener("click",o,!0),K.addEventListener("keypress",function(e){if(!(/\d/.test(e.key)||"."===e.key))return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1}),K.addEventListener("keyup",function(e){d()}),Q.addEventListener("click",Object(u.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(d()){e.next=4;break}return e.abrupt("return");case 4:t=new f(K.value),g(t.shift(12).floor().shift(6).toString()).then(function(){K.value="0",ee("Your request has been submitted. Please note that the transaction on the Ethereum network takes about 3 minutes to process."),setTimeout(function(){n(),setTimeout(function(){c()},s.ethConfirmTime)},s.ethBlockTime)}).catch(function(e){V(e),console.error("transfer err:",e)});case 6:case"end":return e.stop()}var t},e)}))),te.addEventListener("click",o),ue.addEventListener("click",Object(u.a)(a.a.mark(function e(){var n,r,u,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(!0);case 3:return n=e.sent,e.next=6,D(!0);case 6:if(r=e.sent,t()){e.next=9;break}return e.abrupt("return");case 9:if(le){e.next=13;break}return ce("Refresh to update the latest data"),ue.disabled=!0,e.abrupt("return");case 13:return e.next=15,W(le);case 15:return u=e.sent,e.next=18,q(n,r.base58,u,le);case 18:(i=e.sent).success?(le="",ie("Your request has been submitted. Please note that the transaction on the TRON network takes about 1 minute to process."),setTimeout(c,s.tronConfirmTime)):ce(i.message),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),ue.disabled=!1,ce(e.t0);case 26:case"end":return e.stop()}},e,null,[[0,22]])}))),o(!1).catch(function(){return null});case 18:case"end":return e.stop()}var h},e)})))}],[[4,1,2]]]);
